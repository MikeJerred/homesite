@import "../../../styles/variables.less";

article.default-layout header.header {
    position: relative;
    z-index: 2000;

    .navbar {
        position: fixed;
        background-color: transparent;
        margin: 0;
        border: 0;
        width: 100%;
        transition: all 0.2s ease-in-out;
        transform: translateY(0);

        &.hide-menu { transform: translateY(-100px); }

        .top-bar {
            //background-color: @theme-light-blue;
            height: @header-height;
            line-height: @header-height;
            font-size: 28px;
            padding-left: 40px;
            padding-top: 20px;

            @media (max-width: @screen-sm-min) {
                padding-left: 20px;
            }

            > .logo {
                @size: @header-height - 20px*2;
                //transition: all 0.3s ease-in-out;
                opacity: 1;
                width: @size;
                height: @size;
                line-height: @size - 4px;
                font-size: @size/2;
                font-family: @font-family-serif;
                position: relative;
                text-align: center;
                background-color: transparent;
                border: 2px solid @theme-grey;
                display: block;

                &.ng-hide {
                    opacity: 0;
                }

                &:hover {
                    cursor: pointer;
                }
            }
        }

        .nav-header {
            position: absolute;
            right: 0;
            top: 0;
            z-index: 100;

            > .nav-toggle {
                margin: 20px 40px;
                padding: 0;
                border: none;
                outline: none;
                background-color: transparent;
                font-size: 0;
                pointer-events: auto;
                transition: all ease-in-out 0.3s;

                @media (max-width: @screen-sm-min) {
                    margin: 20px;
                }

                &:hover {
                    background-color: fade(@theme-yellow, 30%);
                }

                svg {
                    .line1, .line2, .line3 {
                        transition: all ease-in-out 0.3s;
                        fill: @theme-grey;
                    }

                    .line1 { transform-origin: 100px 100px; }
                    .line2 { transform-origin: 1618px/2 500px; }
                    .line3 { transform-origin: 100px 900px; }
                }

                &.cross {
                    background-color: transparent;
                    border-color: transparent;

                    @width: 1518px;
                    @height: 900px;
                    @scaleX: unit((sqrt(2)*(@height - 100px) + 100px) / (@width));
                    @translateX: (@width - @height)/2;

                    svg {
                        .line1 { transform: translateX(@translateX) rotate(45deg) scaleX(@scaleX); }
                        .line2 { transform: scaleX(0.001); }
                        .line3 { transform: translateX(@translateX) rotate(-45deg) scaleX(@scaleX); }
                    }
                }
            }
        }

        .nav-collapse {
            @radius: 200px;
            @expand-time: 0.3s;
            @fan-time: 0.3s;
            position: absolute;
            right: 0;
            top: -20px;
            width: @radius * 2;
            height: @radius * 2;
            border-radius: 50%;
            background-color: fade(@theme-yellow, 30%);
            transition: all @expand-time ease-in-out;
            transform: translate(50%, -50%) scale(1);
            pointer-events: auto;

            @media (max-width: @screen-sm-min) {
                top: 0;
            }

            &.collapsed {
                transition-delay: @fan-time * 1/3;
                transform: translate(50%, -50%) scale(0);
            }

            .nav {
                position: relative;
                top: 50%;
                left: 0;
                font-family: @font-family-serif;
                font-size: 24px;

                @media (min-width: @screen-sm-min) {

                }

                > li {
                    position: absolute;
                    transform-origin: @radius 0;
                    transition: all ease-in-out @fan-time;
                    transition-delay: @expand-time * 1/3;
                    opacity: 1;

                    &.active > a { color: @theme-blue; }

                    > a {
                        border-radius: 50%;
                        color: @theme-grey;
                        padding: 20px;
                        cursor: pointer;

                        @media (min-width: @screen-sm-min) {
                            &:first-child {
                                padding-top: 30px;
                            }
                        }
                    }
                }
            }

            @count: 4;
            @step: 85 / (@count);
            .create-children(@i: 1) when (@i =< @count) {
                @angle: (@i - 1) * @step;

                .nav > li:nth-child(@{i}) {
                    transform: rotate(~"-@{angle}deg");

                    > a {
                        transform: rotate(~"@{angle}deg");
                    }
                }

                &.collapsed .nav {
                    > li {
                        transition-delay: 0s;
                        opacity: 0;

                        &:nth-child(@{i}) {
                            transform: rotate(0);
                        }
                    }
                }

                .create-children(@i+1);
            }

            .create-children();
        }
    }
}